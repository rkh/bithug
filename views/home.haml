%h1= user.name

.keys
  - if user.name == current_user.name
    %h3= "Your keys and repositories" 
    %form{:method => "post"}
      - user.ssh_keys.all.compact.each do |key|
        %input{:type=>"text", :readonly=>"true", :value=>"#{key.value}"}
        %input{:type=>"text", :readonly=>"true", :value=>"#{key.name}"} 
    %form{:method => "post"}
      %input{:type=>"text", :name=>"post[key]"}
      %textarea{:name=>"post[name]"}
      %input{:type => "submit", :value => "Add Key"}
  - else 
    %h3= "#{user.name}'s repositories" 
    %form{:method => "post"}
      - unless current_user.following? user
        %input{:type => "submit", :value => "Follow", :name => "post[follow]"}
      - else
        %input{:type => "submit", :value => "Unfollow", :name => "post[unfollow]"}

#repositories

  #owned_repositories
    - user.repositories.each do |r|
      %a{:href => "/#{user.name}/#{r.name}"}= r.name

  #writeable_repositories
    - user.writeable_repositories.each do |r|
      %a{:href => "/repositories/#{r.name}"}= r.name

  #readable_repositories
    - user.readable_repositories.each do |r|
      %a{:href => "/repositories/#{r.name}"}= r.name
